{"ast":null,"code":"var _jsxFileName = \"/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonCard.tsx\";\nimport React, { useRef } from \"react\";\nimport { PokemonTypeColors, PokemonTypePlaceholders } from \"../globals\";\nimport { leftPad } from \"../utils/leftPad\";\nimport { useSpring, animated } from \"react-spring\";\nimport Trail from \"./Trail\";\nimport ProgressiveImage from \"react-progressive-image-loading\";\nimport { useHistory } from \"react-router-dom\";\nimport { useResize } from \"../hooks/useResize\";\nconst MaskStyling = {\n  width: 130,\n  height: 130,\n  zIndex: -10,\n  bottom: 8,\n  left: 16\n};\nconst ImageContainerStyling = {\n  width: 175,\n  height: 175\n};\n\nconst calc = (x, y, width, height) => {\n  const WINDOW_DIVIDER = 40;\n  console.log(`x: ${x}`);\n  console.log(`y: ${y}`);\n  console.log(`width: ${width}`);\n  console.log(`height: ${height}`);\n  return [-(y - height / 2) / WINDOW_DIVIDER, (x - width / 2) / WINDOW_DIVIDER, 1];\n};\n\nconst trans = (x, y, z) => {\n  return `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) scale(${z})`;\n};\n\nconst PokemonCard = React.memo(({\n  id,\n  name,\n  sprites,\n  types,\n  position,\n  numCols\n}) => {\n  const history = useHistory();\n  const [props, set] = useSpring(() => ({\n    xys: [0, 0, 1],\n    config: {\n      mass: 8,\n      tension: 350,\n      friction: 40\n    }\n  }));\n  const cardRef = useRef(null);\n  const {\n    width,\n    height,\n    top,\n    left\n  } = useResize(cardRef);\n  const backgroundColors = types.map(({\n    type\n  }) => {\n    const [[, backgroundColor]] = Object.entries(PokemonTypeColors).filter(([key, _]) => key === type.name);\n    return backgroundColor;\n  });\n  const imagePlaceholder = types.map(({\n    type\n  }) => {\n    const [[, image]] = Object.entries(PokemonTypePlaceholders).filter(([key, _]) => key === type.name);\n    return image;\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: cardRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Trail, {\n    open: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    onMouseMove: ({\n      clientX,\n      clientY\n    }) => set({\n      xys: calc(clientX, clientY, width + left, height + top)\n    }),\n    onMouseLeave: () => set({\n      xys: [0, 0, 1]\n    }),\n    className: \"w-full rounded-lg overflow-hidden shadow-lg mx-auto cursor-pointer hover:shadow-2xl transition-all duration-75 ease-in-out\",\n    style: {\n      // @ts-ignore\n      transform: props.xys.interpolate(trans),\n      backgroundColor: backgroundColors[0].medium\n    },\n    onClick: () => history.push(`/pokemons/${id}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-32 mx-auto w-full flex items-center justify-center relative\",\n    style: {\n      backgroundColor: backgroundColors[0].medium\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-6xl font-semibold text-black text-opacity-25 absolute tracking-xl top-1/8 pointer-events-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, \"#\", leftPad(id, 3)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inset-x-auto bottom-0 absolute z-20\",\n    style: ImageContainerStyling,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-full absolute z-0 inset-x-auto mx-auto\",\n    style: { ...MaskStyling,\n      backgroundColor: backgroundColors[0].light\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(ProgressiveImage, {\n    preview: imagePlaceholder[0],\n    src: sprites.frontDefault,\n    render: (src, style) => /*#__PURE__*/React.createElement(\"img\", {\n      src: src,\n      style: style,\n      alt: name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white w-full pt-5 pb-8 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"capitalize font-semibold text-3xl mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap mx-auto justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, types.map(({\n    type\n  }, index) => {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      key: `${id}-${type.name}`,\n      className: \"font-bold uppercase text-sm\" + (index !== types.length - 1 ? \" mr-6\" : \"\"),\n      style: {\n        color: backgroundColors[index].medium\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, type.name);\n  }))))));\n}, (previousProps, nextProps) => previousProps.id === nextProps.id);\nexport default PokemonCard;","map":{"version":3,"sources":["/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonCard.tsx"],"names":["React","useRef","PokemonTypeColors","PokemonTypePlaceholders","leftPad","useSpring","animated","Trail","ProgressiveImage","useHistory","useResize","MaskStyling","width","height","zIndex","bottom","left","ImageContainerStyling","calc","x","y","WINDOW_DIVIDER","console","log","trans","z","PokemonCard","memo","id","name","sprites","types","position","numCols","history","props","set","xys","config","mass","tension","friction","cardRef","top","backgroundColors","map","type","backgroundColor","Object","entries","filter","key","_","imagePlaceholder","image","clientX","clientY","transform","interpolate","medium","push","light","frontDefault","src","style","index","length","color","previousProps","nextProps"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\nimport { Pokemon } from \"../features/pokemonSlice\";\nimport { PokemonTypeColors, PokemonTypePlaceholders } from \"../globals\";\nimport { leftPad } from \"../utils/leftPad\";\nimport { useSpring, animated } from \"react-spring\";\nimport Trail from \"./Trail\";\nimport ProgressiveImage from \"react-progressive-image-loading\";\nimport { useHistory } from \"react-router-dom\";\nimport { useResize } from \"../hooks/useResize\";\n\nconst MaskStyling = {\n  width: 130,\n  height: 130,\n  zIndex: -10,\n  bottom: 8,\n  left: 16,\n};\nconst ImageContainerStyling = {\n  width: 175,\n  height: 175,\n};\n\ntype Props = Pokemon & {\n  position: number;\n  numCols: number;\n};\n\nconst calc = (x: number, y: number, width: number, height: number) => {\n  const WINDOW_DIVIDER = 40;\n\n  console.log(`x: ${x}`);\n  console.log(`y: ${y}`);\n  console.log(`width: ${width}`);\n  console.log(`height: ${height}`);\n\n  return [\n    -(y - height / 2) / WINDOW_DIVIDER,\n    (x - width / 2) / WINDOW_DIVIDER,\n    1,\n  ];\n};\n\nconst trans = (x: number, y: number, z: number) => {\n  return `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) scale(${z})`;\n};\n\nconst PokemonCard = React.memo(\n  ({ id, name, sprites, types, position, numCols }: Props) => {\n    const history = useHistory();\n    const [props, set] = useSpring(() => ({\n      xys: [0, 0, 1],\n      config: { mass: 8, tension: 350, friction: 40 },\n    }));\n    const cardRef = useRef<HTMLDivElement | null>(null);\n    const { width, height, top, left } = useResize(cardRef);\n\n    const backgroundColors = types.map(({ type }) => {\n      const [[, backgroundColor]] = Object.entries(PokemonTypeColors).filter(\n        ([key, _]) => key === type.name\n      );\n\n      return backgroundColor;\n    });\n    const imagePlaceholder = types.map(({ type }) => {\n      const [[, image]] = Object.entries(PokemonTypePlaceholders).filter(\n        ([key, _]) => key === type.name\n      );\n\n      return image;\n    });\n\n    return (\n      <div ref={cardRef}>\n        <Trail open={true}>\n          <animated.div\n            onMouseMove={({ clientX, clientY }) =>\n              set({ xys: calc(clientX, clientY, width + left, height + top) })\n            }\n            onMouseLeave={() => set({ xys: [0, 0, 1] })}\n            className=\"w-full rounded-lg overflow-hidden shadow-lg mx-auto cursor-pointer hover:shadow-2xl transition-all duration-75 ease-in-out\"\n            style={{\n              // @ts-ignore\n              transform: props.xys.interpolate(trans),\n              backgroundColor: backgroundColors[0].medium,\n            }}\n            onClick={() => history.push(`/pokemons/${id}`)}\n          >\n            <div\n              className=\"py-32 mx-auto w-full flex items-center justify-center relative\"\n              style={{\n                backgroundColor: backgroundColors[0].medium,\n              }}\n            >\n              <p className=\"text-6xl font-semibold text-black text-opacity-25 absolute tracking-xl top-1/8 pointer-events-none\">\n                #{leftPad(id, 3)}\n              </p>\n\n              <div\n                className=\"inset-x-auto bottom-0 absolute z-20\"\n                style={ImageContainerStyling}\n              >\n                <div\n                  className=\"rounded-full absolute z-0 inset-x-auto mx-auto\"\n                  style={{\n                    ...MaskStyling,\n                    backgroundColor: backgroundColors[0].light,\n                  }}\n                />\n                <ProgressiveImage\n                  preview={imagePlaceholder[0]}\n                  src={sprites.frontDefault}\n                  render={(src, style) => (\n                    <img src={src} style={style} alt={name} />\n                  )}\n                />\n              </div>\n            </div>\n\n            <div className=\"bg-white w-full pt-5 pb-8 text-center\">\n              <h1 className=\"capitalize font-semibold text-3xl mb-2\">{name}</h1>\n              <div className=\"flex flex-wrap mx-auto justify-center\">\n                {types.map(({ type }, index) => {\n                  return (\n                    <p\n                      key={`${id}-${type.name}`}\n                      className={\n                        \"font-bold uppercase text-sm\" +\n                        (index !== types.length - 1 ? \" mr-6\" : \"\")\n                      }\n                      style={{ color: backgroundColors[index].medium }}\n                    >\n                      {type.name}\n                    </p>\n                  );\n                })}\n              </div>\n            </div>\n          </animated.div>\n        </Trail>\n      </div>\n    );\n  },\n  (previousProps, nextProps) => previousProps.id === nextProps.id\n);\n\nexport default PokemonCard;\n"]},"metadata":{},"sourceType":"module"}