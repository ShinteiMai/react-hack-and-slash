{"ast":null,"code":"import _objectSpread from\"/home/shinteimai/workspace/personal/react-pokedex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/shinteimai/workspace/personal/react-pokedex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import Layout from\"../components/Layout\";import PokemonDetailsBiography from\"../components/PokemonDetailsBiography\";import PokemonDetailsEvolutions from\"../components/PokemonDetailsEvolutions\";import PokemonDetailsHeader from\"../components/PokemonDetailsHeader\";import PokemonDetailsStats from\"../components/PokemonDetailsStats\";import Tab from\"../components/Tab\";import{getPokemonById,pokemonsSelector}from\"../features/pokemonSlice\";import{getSpeciesById,speciesSelector}from\"../features/speciesSlice\";import{PokemonTypeColors,SliceStatus}from\"../globals\";import{ScaleLoader}from\"react-spinners\";import{useTransition,animated}from\"react-spring\";var PokemonDetailsPage=function PokemonDetailsPage(_ref){var match=_ref.match;var id=match.params.id;var dispatch=useDispatch();var history=useHistory();var _useState=useState(\"biography\"),_useState2=_slicedToArray(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1];var transitions=useTransition(activeTab,function(p){return p;},{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:250}});var pokemons=useSelector(pokemonsSelector);var species=useSelector(speciesSelector);var selectedPokemon=pokemons.data.find(function(pokemon){return pokemon!==null&&pokemon.id===Number(id);});var selectedSpecies=species.data.find(function(s){return s.id===Number(id);});useEffect(function(){if(pokemons.data.length===0){dispatch(getPokemonById({pokemonId:id}));}dispatch(getSpeciesById({pokemonId:id}));//eslint-disable-next-line\n},[]);var backgroundColors=selectedPokemon===null||selectedPokemon===void 0?void 0:selectedPokemon.types.map(function(_ref2){var type=_ref2.type;var _Object$entries$filte=Object.entries(PokemonTypeColors).filter(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],_=_ref4[1];return key===type.name;}),_Object$entries$filte2=_slicedToArray(_Object$entries$filte,1),_Object$entries$filte3=_slicedToArray(_Object$entries$filte2[0],2),backgroundColor=_Object$entries$filte3[1];return backgroundColor;});var selectedBackgroundColor=backgroundColors&&backgroundColors[0];return/*#__PURE__*/React.createElement(Layout,{title:\"Pokemon Details\"},species.status.state===SliceStatus.IDLE||species.status.state===SliceStatus.LOADING?/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mx-auto mt-12\"},/*#__PURE__*/React.createElement(ScaleLoader,null)):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(React.Fragment,null,selectedPokemon&&selectedSpecies&&selectedBackgroundColor&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"text-primary font-semibold transform hover:-translate-y-1 transition-transform ease-in duration-150 focus:outline-none\",onClick:function onClick(){return history.push(\"/\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"text-primary font-semibold\"},\"Go Back\")),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col lg:flex-row justify-center items-start w-full mx-auto my-4 rounded-lg shadow-lg\",style:{backgroundColor:selectedBackgroundColor&&selectedBackgroundColor.medium}},/*#__PURE__*/React.createElement(PokemonDetailsHeader,{pokemon:selectedPokemon,species:selectedSpecies,selectedBackgroundColor:selectedBackgroundColor}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-white lg:mt-0 rounded-t-3xl rounded-b-lg lg:rounded-t-none lg:rounded-b-none lg:rounded-r-lg overflow-hidden w-full pt-16 lg:pt-8 px-4 md:px-8 lg:px-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-row justify-between w-full\"},/*#__PURE__*/React.createElement(Tab,{handleSelect:function handleSelect(){return setActiveTab(\"biography\");},isSelected:activeTab===\"biography\"},\"Biography\"),/*#__PURE__*/React.createElement(Tab,{handleSelect:function handleSelect(){return setActiveTab(\"stats\");},isSelected:activeTab===\"stats\"},\"Stats\"),/*#__PURE__*/React.createElement(Tab,{handleSelect:function handleSelect(){return setActiveTab(\"evolutions\");},isSelected:activeTab===\"evolutions\"},\"Evolutions\")),/*#__PURE__*/React.createElement(\"div\",{className:\"relative mt-8 flex\"},transitions.map(function(_ref5){var item=_ref5.item,key=_ref5.key,props=_ref5.props;var page=/*#__PURE__*/React.createElement(PokemonDetailsBiography,{species:selectedSpecies,pokemon:selectedPokemon});switch(item){case\"biography\":page=/*#__PURE__*/React.createElement(PokemonDetailsBiography,{species:selectedSpecies,pokemon:selectedPokemon});break;case\"stats\":page=/*#__PURE__*/React.createElement(PokemonDetailsStats,null);break;case\"evolutions\":page=/*#__PURE__*/React.createElement(PokemonDetailsEvolutions,null);break;default:break;}return/*#__PURE__*/React.createElement(animated.div,{key:key,style:_objectSpread({},props,{position:\"absolute\",width:\"100%\",height:\"100%\"})},page);}))))))));};export default PokemonDetailsPage;","map":{"version":3,"sources":["/home/shinteimai/workspace/personal/react-pokedex/src/pages/PokemonDetailsPage.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useHistory","Layout","PokemonDetailsBiography","PokemonDetailsEvolutions","PokemonDetailsHeader","PokemonDetailsStats","Tab","getPokemonById","pokemonsSelector","getSpeciesById","speciesSelector","PokemonTypeColors","SliceStatus","ScaleLoader","useTransition","animated","PokemonDetailsPage","match","id","params","dispatch","history","activeTab","setActiveTab","transitions","p","from","opacity","enter","leave","config","duration","pokemons","species","selectedPokemon","data","find","pokemon","Number","selectedSpecies","s","length","pokemonId","backgroundColors","types","map","type","Object","entries","filter","key","_","name","backgroundColor","selectedBackgroundColor","status","state","IDLE","LOADING","push","medium","item","props","page","position","width","height"],"mappings":"+UAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,uBAAP,KAAoC,uCAApC,CACA,MAAOC,CAAAA,wBAAP,KAAqC,wCAArC,CACA,MAAOC,CAAAA,oBAAP,KAAiC,oCAAjC,CACA,MAAOC,CAAAA,mBAAP,KAAgC,mCAAhC,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,OAASC,cAAT,CAAyBC,gBAAzB,KAAiD,0BAAjD,CACA,OAASC,cAAT,CAAyBC,eAAzB,KAAgD,0BAAhD,CACA,OAASC,iBAAT,CAA4BC,WAA5B,KAA+C,YAA/C,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,aAAT,CAAwBC,QAAxB,KAAwC,cAAxC,CAQA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,MAAiD,IAA9CC,CAAAA,KAA8C,MAA9CA,KAA8C,IAClEC,CAAAA,EADkE,CAC3DD,KAAK,CAACE,MADqD,CAClED,EADkE,CAE1E,GAAME,CAAAA,QAAQ,CAAGtB,WAAW,EAA5B,CACA,GAAMuB,CAAAA,OAAO,CAAGrB,UAAU,EAA1B,CAH0E,cAIxCH,QAAQ,CAAc,WAAd,CAJgC,wCAInEyB,SAJmE,eAIxDC,YAJwD,eAK1E,GAAMC,CAAAA,WAAW,CAAGV,aAAa,CAACQ,SAAD,CAAY,SAACG,CAAD,QAAOA,CAAAA,CAAP,EAAZ,CAAsB,CACrDC,IAAI,CAAE,CAAEC,OAAO,CAAE,CAAX,CAD+C,CAErDC,KAAK,CAAE,CAAED,OAAO,CAAE,CAAX,CAF8C,CAGrDE,KAAK,CAAE,CAAEF,OAAO,CAAE,CAAX,CAH8C,CAIrDG,MAAM,CAAE,CACNC,QAAQ,CAAE,GADJ,CAJ6C,CAAtB,CAAjC,CASA,GAAMC,CAAAA,QAAQ,CAAGjC,WAAW,CAACS,gBAAD,CAA5B,CACA,GAAMyB,CAAAA,OAAO,CAAGlC,WAAW,CAACW,eAAD,CAA3B,CACA,GAAMwB,CAAAA,eAAe,CAAGF,QAAQ,CAACG,IAAT,CAAcC,IAAd,CACtB,SAACC,OAAD,QAAaA,CAAAA,OAAO,GAAK,IAAZ,EAAoBA,OAAO,CAACnB,EAAR,GAAeoB,MAAM,CAACpB,EAAD,CAAtD,EADsB,CAAxB,CAGA,GAAMqB,CAAAA,eAAe,CAAGN,OAAO,CAACE,IAAR,CAAaC,IAAb,CAAkB,SAACI,CAAD,QAAOA,CAAAA,CAAC,CAACtB,EAAF,GAASoB,MAAM,CAACpB,EAAD,CAAtB,EAAlB,CAAxB,CAEAtB,SAAS,CAAC,UAAM,CACd,GAAIoC,QAAQ,CAACG,IAAT,CAAcM,MAAd,GAAyB,CAA7B,CAAgC,CAC9BrB,QAAQ,CAACb,cAAc,CAAC,CAAEmC,SAAS,CAAExB,EAAb,CAAD,CAAf,CAAR,CACD,CACDE,QAAQ,CAACX,cAAc,CAAC,CAAEiC,SAAS,CAAExB,EAAb,CAAD,CAAf,CAAR,CACA;AACD,CANQ,CAMN,EANM,CAAT,CAQA,GAAMyB,CAAAA,gBAAgB,CAAGT,eAAH,SAAGA,eAAH,iBAAGA,eAAe,CAAEU,KAAjB,CAAuBC,GAAvB,CAA2B,eAAc,IAAXC,CAAAA,IAAW,OAAXA,IAAW,2BAClCC,MAAM,CAACC,OAAP,CAAerC,iBAAf,EAAkCsC,MAAlC,CAC5B,kDAAEC,GAAF,UAAOC,CAAP,gBAAcD,CAAAA,GAAG,GAAKJ,IAAI,CAACM,IAA3B,EAD4B,CADkC,mIACtDC,eADsD,2BAKhE,MAAOA,CAAAA,eAAP,CACD,CANwB,CAAzB,CAQA,GAAMC,CAAAA,uBAAuB,CAAGX,gBAAgB,EAAIA,gBAAgB,CAAC,CAAD,CAApE,CAEA,mBACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,iBAAd,EACGV,OAAO,CAACsB,MAAR,CAAeC,KAAf,GAAyB5C,WAAW,CAAC6C,IAArC,EACDxB,OAAO,CAACsB,MAAR,CAAeC,KAAf,GAAyB5C,WAAW,CAAC8C,OADpC,cAEC,2BAAK,SAAS,CAAC,2BAAf,eACE,oBAAC,WAAD,MADF,CAFD,cAMC,qDACE,wCACGxB,eAAe,EAAIK,eAAnB,EAAsCe,uBAAtC,eACC,qDACE,8BACE,SAAS,CAAC,wHADZ,CAEE,OAAO,CAAE,yBAAMjC,CAAAA,OAAO,CAACsC,IAAR,CAAa,GAAb,CAAN,EAFX,eAIE,4BAAM,SAAS,CAAC,4BAAhB,YAJF,CADF,cAOE,2BACE,SAAS,CAAC,+FADZ,CAEE,KAAK,CAAE,CACLN,eAAe,CACbC,uBAAuB,EAAIA,uBAAuB,CAACM,MAFhD,CAFT,eAOE,oBAAC,oBAAD,EACE,OAAO,CAAE1B,eADX,CAEE,OAAO,CAAEK,eAFX,CAGE,uBAAuB,CAAEe,uBAH3B,EAPF,cAYE,2BAAK,SAAS,CAAC,4JAAf,eACE,2BAAK,SAAS,CAAC,sCAAf,eACE,oBAAC,GAAD,EACE,YAAY,CAAE,8BAAM/B,CAAAA,YAAY,CAAC,WAAD,CAAlB,EADhB,CAEE,UAAU,CAAED,SAAS,GAAK,WAF5B,cADF,cAOE,oBAAC,GAAD,EACE,YAAY,CAAE,8BAAMC,CAAAA,YAAY,CAAC,OAAD,CAAlB,EADhB,CAEE,UAAU,CAAED,SAAS,GAAK,OAF5B,UAPF,cAaE,oBAAC,GAAD,EACE,YAAY,CAAE,8BAAMC,CAAAA,YAAY,CAAC,YAAD,CAAlB,EADhB,CAEE,UAAU,CAAED,SAAS,GAAK,YAF5B,eAbF,CADF,cAqBE,2BAAK,SAAS,CAAC,oBAAf,EACGE,WAAW,CAACqB,GAAZ,CAAgB,eAA0B,IAAvBgB,CAAAA,IAAuB,OAAvBA,IAAuB,CAAjBX,GAAiB,OAAjBA,GAAiB,CAAZY,KAAY,OAAZA,KAAY,CACzC,GAAIC,CAAAA,IAAiB,cACnB,oBAAC,uBAAD,EACE,OAAO,CAAExB,eADX,CAEE,OAAO,CAAEL,eAFX,EADF,CAOA,OAAQ2B,IAAR,EACE,IAAK,WAAL,CACEE,IAAI,cACF,oBAAC,uBAAD,EACE,OAAO,CAAExB,eADX,CAEE,OAAO,CAAEL,eAFX,EADF,CAMA,MACF,IAAK,OAAL,CACE6B,IAAI,cAAG,oBAAC,mBAAD,MAAP,CACA,MACF,IAAK,YAAL,CACEA,IAAI,cAAG,oBAAC,wBAAD,MAAP,CACA,MACF,QACE,MAhBJ,CAkBA,mBACE,oBAAC,QAAD,CAAU,GAAV,EACE,GAAG,CAAEb,GADP,CAEE,KAAK,kBACAY,KADA,EAEHE,QAAQ,CAAE,UAFP,CAGHC,KAAK,CAAE,MAHJ,CAIHC,MAAM,CAAE,MAJL,EAFP,EASGH,IATH,CADF,CAaD,CAvCA,CADH,CArBF,CAZF,CAPF,CAFJ,CADF,CAPJ,CADF,CAsGD,CA7ID,CA8IA,cAAe/C,CAAAA,kBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { RouteComponentProps } from \"react-router\";\nimport Layout from \"../components/Layout\";\nimport PokemonDetailsBiography from \"../components/PokemonDetailsBiography\";\nimport PokemonDetailsEvolutions from \"../components/PokemonDetailsEvolutions\";\nimport PokemonDetailsHeader from \"../components/PokemonDetailsHeader\";\nimport PokemonDetailsStats from \"../components/PokemonDetailsStats\";\nimport Tab from \"../components/Tab\";\nimport { getPokemonById, pokemonsSelector } from \"../features/pokemonSlice\";\nimport { getSpeciesById, speciesSelector } from \"../features/speciesSlice\";\nimport { PokemonTypeColors, SliceStatus } from \"../globals\";\nimport { ScaleLoader } from \"react-spinners\";\nimport { useTransition, animated } from \"react-spring\";\n\ntype PokemonTabs = \"biography\" | \"stats\" | \"evolutions\";\n\ninterface MatchParams {\n  id: string;\n}\n\nconst PokemonDetailsPage = ({ match }: RouteComponentProps<MatchParams>) => {\n  const { id } = match.params;\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [activeTab, setActiveTab] = useState<PokemonTabs>(\"biography\");\n  const transitions = useTransition(activeTab, (p) => p, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    config: {\n      duration: 250,\n    },\n  });\n\n  const pokemons = useSelector(pokemonsSelector);\n  const species = useSelector(speciesSelector);\n  const selectedPokemon = pokemons.data.find(\n    (pokemon) => pokemon !== null && pokemon.id === Number(id)\n  );\n  const selectedSpecies = species.data.find((s) => s.id === Number(id));\n\n  useEffect(() => {\n    if (pokemons.data.length === 0) {\n      dispatch(getPokemonById({ pokemonId: id }));\n    }\n    dispatch(getSpeciesById({ pokemonId: id }));\n    //eslint-disable-next-line\n  }, []);\n\n  const backgroundColors = selectedPokemon?.types.map(({ type }) => {\n    const [[, backgroundColor]] = Object.entries(PokemonTypeColors).filter(\n      ([key, _]) => key === type.name\n    );\n\n    return backgroundColor;\n  });\n\n  const selectedBackgroundColor = backgroundColors && backgroundColors[0];\n\n  return (\n    <Layout title=\"Pokemon Details\">\n      {species.status.state === SliceStatus.IDLE ||\n      species.status.state === SliceStatus.LOADING ? (\n        <div className=\"text-center mx-auto mt-12\">\n          <ScaleLoader />\n        </div>\n      ) : (\n        <>\n          <>\n            {selectedPokemon && selectedSpecies && selectedBackgroundColor && (\n              <>\n                <button\n                  className=\"text-primary font-semibold transform hover:-translate-y-1 transition-transform ease-in duration-150 focus:outline-none\"\n                  onClick={() => history.push(\"/\")}\n                >\n                  <span className=\"text-primary font-semibold\">Go Back</span>\n                </button>\n                <div\n                  className=\"flex flex-col lg:flex-row justify-center items-start w-full mx-auto my-4 rounded-lg shadow-lg\"\n                  style={{\n                    backgroundColor:\n                      selectedBackgroundColor && selectedBackgroundColor.medium,\n                  }}\n                >\n                  <PokemonDetailsHeader\n                    pokemon={selectedPokemon}\n                    species={selectedSpecies}\n                    selectedBackgroundColor={selectedBackgroundColor}\n                  />\n                  <div className=\"bg-white lg:mt-0 rounded-t-3xl rounded-b-lg lg:rounded-t-none lg:rounded-b-none lg:rounded-r-lg overflow-hidden w-full pt-16 lg:pt-8 px-4 md:px-8 lg:px-12\">\n                    <div className=\"flex flex-row justify-between w-full\">\n                      <Tab\n                        handleSelect={() => setActiveTab(\"biography\")}\n                        isSelected={activeTab === \"biography\"}\n                      >\n                        Biography\n                      </Tab>\n                      <Tab\n                        handleSelect={() => setActiveTab(\"stats\")}\n                        isSelected={activeTab === \"stats\"}\n                      >\n                        Stats\n                      </Tab>\n                      <Tab\n                        handleSelect={() => setActiveTab(\"evolutions\")}\n                        isSelected={activeTab === \"evolutions\"}\n                      >\n                        Evolutions\n                      </Tab>\n                    </div>\n                    <div className=\"relative mt-8 flex\">\n                      {transitions.map(({ item, key, props }) => {\n                        let page: JSX.Element = (\n                          <PokemonDetailsBiography\n                            species={selectedSpecies}\n                            pokemon={selectedPokemon}\n                          />\n                        );\n\n                        switch (item) {\n                          case \"biography\":\n                            page = (\n                              <PokemonDetailsBiography\n                                species={selectedSpecies}\n                                pokemon={selectedPokemon}\n                              />\n                            );\n                            break;\n                          case \"stats\":\n                            page = <PokemonDetailsStats />;\n                            break;\n                          case \"evolutions\":\n                            page = <PokemonDetailsEvolutions />;\n                            break;\n                          default:\n                            break;\n                        }\n                        return (\n                          <animated.div\n                            key={key}\n                            style={{\n                              ...props,\n                              position: \"absolute\",\n                              width: \"100%\",\n                              height: \"100%\",\n                            }}\n                          >\n                            {page}\n                          </animated.div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n          </>\n        </>\n      )}\n    </Layout>\n  );\n};\nexport default PokemonDetailsPage;\n"]},"metadata":{},"sourceType":"module"}