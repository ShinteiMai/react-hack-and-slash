{"ast":null,"code":"import _slicedToArray from\"/home/shinteimai/workspace/personal/react-pokedex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{GoSearch}from\"react-icons/go\";import{useDispatch,useSelector}from\"react-redux\";import{PokemonGenerationsEnum,searchPokemonsByNameReducer,filterPokemonsByGenerationReducer}from\"../features/cachedPokemonsSlice\";import{PAGINATE_SIZE,pokemonsSelector,resetPokemonsReducer}from\"../features/pokemonSlice\";import{SliceStatus}from\"../globals\";import{randomize}from\"../utils/randomize\";import PokemonGenerations from\"./PokemonGenerations\";var PokemonForm=function PokemonForm(_ref){var placeholder=_ref.placeholder,_ref$initialValue=_ref.initialValue,initialValue=_ref$initialValue===void 0?\"\":_ref$initialValue,changeHandler=_ref.changeHandler,mutatePage=_ref.mutatePage;var dispatch=useDispatch();var pokemons=useSelector(pokemonsSelector);var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedGeneration=_useState4[0],setSelectedGeneration=_useState4[1];var inputRef=useRef(0);var isLoading=pokemons.status.state===SliceStatus.LOADING;useEffect(function(){if(changeHandler){clearTimeout(inputRef.current);inputRef.current=window.setTimeout(function(){changeHandler();},100);}},[value,changeHandler]);var submitFormHandler=function submitFormHandler(){if(!isLoading){dispatch(resetPokemonsReducer({}));dispatch(searchPokemonsByNameReducer({pokemonName:value}));mutatePage(0);}};var changeGenerationHandler=function changeGenerationHandler(){if(!isLoading){dispatch(resetPokemonsReducer({}));dispatch(filterPokemonsByGenerationReducer({selectedGeneration:selectedGeneration}));if(selectedGeneration===null){mutatePage(randomize(0,Number(PokemonGenerationsEnum.GENERATION_7)-PAGINATE_SIZE));}else{mutatePage(0);}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-center md:justify-start flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"relative inline-flex\"},/*#__PURE__*/React.createElement(\"span\",{className:\"absolute inset-y-0 left-0 flex items-center pl-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"absolute flex items-center justify-center pointer-events-none\"},/*#__PURE__*/React.createElement(GoSearch,{color:\"#8A8A8A\"}))),/*#__PURE__*/React.createElement(\"input\",{className:\"py-2 pl-10 md:pr-24 lg:pr-48  w-full text-sm rounded-lg bg-primaryGray text-tertiaryGray placeholder-tertiaryGray appearance-none focus:outline-none focus:font-medium focus:border-secondaryGray\",placeholder:placeholder||\"Search an item...\",value:value,onKeyPress:function onKeyPress(e){if(e.key===\"Enter\"){submitFormHandler();}},onChange:function onChange(e){return setValue(e.currentTarget.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2 md:ml-5 mt-3 md:mt-0\"},/*#__PURE__*/React.createElement(PokemonGenerations,{selectedGeneration:selectedGeneration,setSelectedGeneration:setSelectedGeneration,changeGenerationHandler:changeGenerationHandler,isLoading:isLoading})),/*#__PURE__*/React.createElement(\"button\",{className:\"ml-2 md:ml-5 mt-3 md:mt-0 bg-primary py-1 px-8 rounded-md text-white font-semibold  focus:outline-none transition duration-200 ease-in-out\"+(isLoading?\" opacity-50 cursor-default\":\" hover:bg-white hover:text-primary transform hover:-translate-y-1 cursor-pointer\"),onClick:submitFormHandler},\"Search\"));};export default PokemonForm;","map":{"version":3,"sources":["/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonForm.tsx"],"names":["React","useEffect","useRef","useState","GoSearch","useDispatch","useSelector","PokemonGenerationsEnum","searchPokemonsByNameReducer","filterPokemonsByGenerationReducer","PAGINATE_SIZE","pokemonsSelector","resetPokemonsReducer","SliceStatus","randomize","PokemonGenerations","PokemonForm","placeholder","initialValue","changeHandler","mutatePage","dispatch","pokemons","value","setValue","selectedGeneration","setSelectedGeneration","inputRef","isLoading","status","state","LOADING","clearTimeout","current","window","setTimeout","submitFormHandler","pokemonName","changeGenerationHandler","Number","GENERATION_7","e","key","currentTarget"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { GoSearch } from \"react-icons/go\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  PokemonGenerationsEnum,\n  searchPokemonsByNameReducer,\n  filterPokemonsByGenerationReducer,\n} from \"../features/cachedPokemonsSlice\";\nimport {\n  PAGINATE_SIZE,\n  pokemonsSelector,\n  resetPokemonsReducer,\n} from \"../features/pokemonSlice\";\nimport { SliceStatus } from \"../globals\";\nimport { randomize } from \"../utils/randomize\";\nimport PokemonGenerations from \"./PokemonGenerations\";\n\ntype Props = {\n  mutatePage: React.Dispatch<React.SetStateAction<number>>;\n  placeholder?: string;\n  initialValue?: string;\n  changeHandler?: () => void;\n};\n\nconst PokemonForm = ({\n  placeholder,\n  initialValue = \"\",\n  changeHandler,\n  mutatePage,\n}: Props) => {\n  const dispatch = useDispatch();\n  const pokemons = useSelector(pokemonsSelector);\n  const [value, setValue] = useState<string>(initialValue);\n  const [\n    selectedGeneration,\n    setSelectedGeneration,\n  ] = useState<PokemonGenerationsEnum | null>(null);\n  const inputRef = useRef(0);\n\n  const isLoading = pokemons.status.state === SliceStatus.LOADING;\n\n  useEffect(() => {\n    if (changeHandler) {\n      clearTimeout(inputRef.current);\n      inputRef.current = window.setTimeout(() => {\n        changeHandler();\n      }, 100);\n    }\n  }, [value, changeHandler]);\n\n  const submitFormHandler = () => {\n    if (!isLoading) {\n      dispatch(resetPokemonsReducer({}));\n      dispatch(searchPokemonsByNameReducer({ pokemonName: value }));\n      mutatePage(0);\n    }\n  };\n\n  const changeGenerationHandler = () => {\n    if (!isLoading) {\n      dispatch(resetPokemonsReducer({}));\n      dispatch(filterPokemonsByGenerationReducer({ selectedGeneration }));\n      if (selectedGeneration === null) {\n        mutatePage(\n          randomize(\n            0,\n            Number(PokemonGenerationsEnum.GENERATION_7) - PAGINATE_SIZE\n          )\n        );\n      } else {\n        mutatePage(0);\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center md:justify-start flex-wrap\">\n      <div className=\"relative inline-flex\">\n        <span className=\"absolute inset-y-0 left-0 flex items-center pl-2\">\n          <div className=\"absolute flex items-center justify-center pointer-events-none\">\n            <GoSearch color=\"#8A8A8A\" />\n          </div>\n        </span>\n\n        <input\n          className=\"py-2 pl-10 md:pr-24 lg:pr-48  w-full text-sm rounded-lg bg-primaryGray text-tertiaryGray placeholder-tertiaryGray appearance-none focus:outline-none focus:font-medium focus:border-secondaryGray\"\n          placeholder={placeholder || \"Search an item...\"}\n          value={value}\n          onKeyPress={(e: React.KeyboardEvent) => {\n            if (e.key === \"Enter\") {\n              submitFormHandler();\n            }\n          }}\n          onChange={(e: React.FormEvent<HTMLInputElement>) =>\n            setValue(e.currentTarget.value)\n          }\n        />\n      </div>\n\n      <div className=\"ml-2 md:ml-5 mt-3 md:mt-0\">\n        <PokemonGenerations\n          selectedGeneration={selectedGeneration}\n          setSelectedGeneration={setSelectedGeneration}\n          changeGenerationHandler={changeGenerationHandler}\n          isLoading={isLoading}\n        />\n      </div>\n\n      <button\n        className={\n          \"ml-2 md:ml-5 mt-3 md:mt-0 bg-primary py-1 px-8 rounded-md text-white font-semibold  focus:outline-none transition duration-200 ease-in-out\" +\n          (isLoading\n            ? \" opacity-50 cursor-default\"\n            : \" hover:bg-white hover:text-primary transform hover:-translate-y-1 cursor-pointer\")\n        }\n        onClick={submitFormHandler}\n      >\n        Search\n      </button>\n    </div>\n  );\n};\n\nexport default PokemonForm;\n"]},"metadata":{},"sourceType":"module"}