{"ast":null,"code":"import _objectSpread from\"/home/shinteimai/workspace/personal/react-pokedex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/shinteimai/workspace/personal/react-pokedex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{PokemonTypeColors,PokemonTypePlaceholders}from\"../globals\";import{leftPad}from\"../utils/leftPad\";import{useSpring,animated}from\"react-spring\";import Trail from\"./Trail\";import ProgressiveImage from\"react-progressive-image-loading\";import{useHistory}from\"react-router-dom\";var MaskStyling={width:130,height:130,zIndex:-10,bottom:8,left:16};var ImageContainerStyling={width:175,height:175};var calc=function calc(x,y,position,numCols){var WINDOW_DIVIDER=60;var Y_DIVIDER=0.5;var positionDivider=0.5;switch(numCols){case 1:positionDivider=0.5;break;case 2:if(position===0)positionDivider=0.3;if(position===1)positionDivider=0.7;break;case 3:if(position===0)positionDivider=0.25;if(position===1)positionDivider=0.5;if(position===2)positionDivider=0.75;break;default:break;}return[-(y-window.innerHeight*Y_DIVIDER)/WINDOW_DIVIDER,(x-window.innerWidth*positionDivider)/WINDOW_DIVIDER,1];};var trans=function trans(x,y,z){return\"perspective(600px) rotateX(\".concat(x,\"deg) rotateY(\").concat(y,\"deg) scale(\").concat(z,\")\");};var PokemonCard=React.memo(function(_ref){var id=_ref.id,name=_ref.name,sprites=_ref.sprites,types=_ref.types,position=_ref.position,numCols=_ref.numCols;var history=useHistory();var backgroundColors=types.map(function(_ref2){var type=_ref2.type;var _Object$entries$filte=Object.entries(PokemonTypeColors).filter(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],_=_ref4[1];return key===type.name;}),_Object$entries$filte2=_slicedToArray(_Object$entries$filte,1),_Object$entries$filte3=_slicedToArray(_Object$entries$filte2[0],2),backgroundColor=_Object$entries$filte3[1];return backgroundColor;});var imagePlaceholder=types.map(function(_ref5){var type=_ref5.type;var _Object$entries$filte4=Object.entries(PokemonTypePlaceholders).filter(function(_ref6){var _ref7=_slicedToArray(_ref6,2),key=_ref7[0],_=_ref7[1];return key===type.name;}),_Object$entries$filte5=_slicedToArray(_Object$entries$filte4,1),_Object$entries$filte6=_slicedToArray(_Object$entries$filte5[0],2),image=_Object$entries$filte6[1];return image;});var _useSpring=useSpring(function(){return{xys:[0,0,1],config:{mass:8,tension:350,friction:40}};}),_useSpring2=_slicedToArray(_useSpring,2),props=_useSpring2[0],set=_useSpring2[1];return/*#__PURE__*/React.createElement(Trail,{open:true},/*#__PURE__*/React.createElement(animated.div,{onMouseMove:function onMouseMove(_ref8){var x=_ref8.clientX,y=_ref8.clientY;return set({xys:calc(x,y,position,numCols)});},onMouseLeave:function onMouseLeave(){return set({xys:[0,0,1]});},className:\"w-full rounded-lg overflow-hidden shadow-lg mx-auto cursor-pointer hover:shadow-2xl transition-all duration-75 ease-in-out\",style:{// @ts-ignore\ntransform:props.xys.interpolate(trans),backgroundColor:backgroundColors[0].medium},onClick:function onClick(){return history.push(\"/pokemons/\".concat(id));}},/*#__PURE__*/React.createElement(\"div\",{className:\"py-32 mx-auto w-full flex items-center justify-center relative\",style:{backgroundColor:backgroundColors[0].medium}},/*#__PURE__*/React.createElement(\"p\",{className:\"text-6xl font-semibold text-black text-opacity-25 absolute tracking-xl top-1/8 pointer-events-none\"},\"#\",leftPad(id,3)),/*#__PURE__*/React.createElement(\"div\",{className:\"inset-x-auto bottom-0 absolute z-20\",style:ImageContainerStyling},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded-full absolute z-0 inset-x-auto mx-auto\",style:_objectSpread({},MaskStyling,{backgroundColor:backgroundColors[0].light})}),/*#__PURE__*/React.createElement(ProgressiveImage,{preview:imagePlaceholder[0],src:sprites.frontDefault,render:function render(src,style){return/*#__PURE__*/React.createElement(\"img\",{src:src,style:style,alt:name});}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-white w-full pt-5 pb-8 text-center\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"capitalize font-semibold text-3xl mb-2\"},name),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-wrap mx-auto justify-center\"},types.map(function(_ref9,index){var type=_ref9.type;return/*#__PURE__*/React.createElement(\"p\",{key:\"\".concat(id,\"-\").concat(type.name),className:\"font-bold uppercase text-sm\"+(index!==types.length-1?\" mr-6\":\"\"),style:{color:backgroundColors[index].medium}},type.name);})))));},function(previousProps,nextProps){return previousProps.id===nextProps.id;});export default PokemonCard;","map":{"version":3,"sources":["/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonCard.tsx"],"names":["React","PokemonTypeColors","PokemonTypePlaceholders","leftPad","useSpring","animated","Trail","ProgressiveImage","useHistory","MaskStyling","width","height","zIndex","bottom","left","ImageContainerStyling","calc","x","y","position","numCols","WINDOW_DIVIDER","Y_DIVIDER","positionDivider","window","innerHeight","innerWidth","trans","z","PokemonCard","memo","id","name","sprites","types","history","backgroundColors","map","type","Object","entries","filter","key","_","backgroundColor","imagePlaceholder","image","xys","config","mass","tension","friction","props","set","clientX","clientY","transform","interpolate","medium","push","light","frontDefault","src","style","index","length","color","previousProps","nextProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Pokemon } from \"../features/pokemonSlice\";\nimport { PokemonTypeColors, PokemonTypePlaceholders } from \"../globals\";\nimport { leftPad } from \"../utils/leftPad\";\nimport { useSpring, animated } from \"react-spring\";\nimport Trail from \"./Trail\";\nimport ProgressiveImage from \"react-progressive-image-loading\";\nimport { useHistory } from \"react-router-dom\";\n\nconst MaskStyling = {\n  width: 130,\n  height: 130,\n  zIndex: -10,\n  bottom: 8,\n  left: 16,\n};\nconst ImageContainerStyling = {\n  width: 175,\n  height: 175,\n};\n\ntype Props = Pokemon & {\n  position: number;\n  numCols: number;\n};\n\nconst calc = (x: number, y: number, position: number, numCols: number) => {\n  const WINDOW_DIVIDER = 60;\n  const Y_DIVIDER = 0.5;\n  let positionDivider: number = 0.5;\n\n  switch (numCols) {\n    case 1:\n      positionDivider = 0.5;\n      break;\n    case 2:\n      if (position === 0) positionDivider = 0.3;\n      if (position === 1) positionDivider = 0.7;\n      break;\n    case 3:\n      if (position === 0) positionDivider = 0.25;\n      if (position === 1) positionDivider = 0.5;\n      if (position === 2) positionDivider = 0.75;\n      break;\n    default:\n      break;\n  }\n\n  return [\n    -(y - window.innerHeight * Y_DIVIDER) / WINDOW_DIVIDER,\n    (x - window.innerWidth * positionDivider) / WINDOW_DIVIDER,\n    1,\n  ];\n};\n\nconst trans = (x: number, y: number, z: number) => {\n  return `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) scale(${z})`;\n};\n\nconst PokemonCard = React.memo(\n  ({ id, name, sprites, types, position, numCols }: Props) => {\n    const history = useHistory();\n    const backgroundColors = types.map(({ type }) => {\n      const [[, backgroundColor]] = Object.entries(PokemonTypeColors).filter(\n        ([key, _]) => key === type.name\n      );\n\n      return backgroundColor;\n    });\n    const imagePlaceholder = types.map(({ type }) => {\n      const [[, image]] = Object.entries(PokemonTypePlaceholders).filter(\n        ([key, _]) => key === type.name\n      );\n\n      return image;\n    });\n    const [props, set] = useSpring(() => ({\n      xys: [0, 0, 1],\n      config: { mass: 8, tension: 350, friction: 40 },\n    }));\n\n    return (\n      <Trail open={true}>\n        <animated.div\n          onMouseMove={({ clientX: x, clientY: y }) =>\n            set({ xys: calc(x, y, position, numCols) })\n          }\n          onMouseLeave={() => set({ xys: [0, 0, 1] })}\n          className=\"w-full rounded-lg overflow-hidden shadow-lg mx-auto cursor-pointer hover:shadow-2xl transition-all duration-75 ease-in-out\"\n          style={{\n            // @ts-ignore\n            transform: props.xys.interpolate(trans),\n            backgroundColor: backgroundColors[0].medium,\n          }}\n          onClick={() => history.push(`/pokemons/${id}`)}\n        >\n          <div\n            className=\"py-32 mx-auto w-full flex items-center justify-center relative\"\n            style={{\n              backgroundColor: backgroundColors[0].medium,\n            }}\n          >\n            <p className=\"text-6xl font-semibold text-black text-opacity-25 absolute tracking-xl top-1/8 pointer-events-none\">\n              #{leftPad(id, 3)}\n            </p>\n\n            <div\n              className=\"inset-x-auto bottom-0 absolute z-20\"\n              style={ImageContainerStyling}\n            >\n              <div\n                className=\"rounded-full absolute z-0 inset-x-auto mx-auto\"\n                style={{\n                  ...MaskStyling,\n                  backgroundColor: backgroundColors[0].light,\n                }}\n              />\n              <ProgressiveImage\n                preview={imagePlaceholder[0]}\n                src={sprites.frontDefault}\n                render={(src, style) => (\n                  <img src={src} style={style} alt={name} />\n                )}\n              />\n            </div>\n          </div>\n\n          <div className=\"bg-white w-full pt-5 pb-8 text-center\">\n            <h1 className=\"capitalize font-semibold text-3xl mb-2\">{name}</h1>\n            <div className=\"flex flex-wrap mx-auto justify-center\">\n              {types.map(({ type }, index) => {\n                return (\n                  <p\n                    key={`${id}-${type.name}`}\n                    className={\n                      \"font-bold uppercase text-sm\" +\n                      (index !== types.length - 1 ? \" mr-6\" : \"\")\n                    }\n                    style={{ color: backgroundColors[index].medium }}\n                  >\n                    {type.name}\n                  </p>\n                );\n              })}\n            </div>\n          </div>\n        </animated.div>\n      </Trail>\n    );\n  },\n  (previousProps, nextProps) => previousProps.id === nextProps.id\n);\n\nexport default PokemonCard;\n"]},"metadata":{},"sourceType":"module"}