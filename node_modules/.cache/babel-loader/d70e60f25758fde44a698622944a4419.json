{"ast":null,"code":"var _jsxFileName = \"/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonDetailsEvolutions.tsx\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getPokemonById, pokemonsSelector } from \"../features/pokemonSlice\";\nimport PokemonEvolution from \"./PokemonEvolution\";\n\nconst PokemonDetailsEvolutions = ({\n  pokemon,\n  species,\n  evolutionChain,\n  selectedBackgroundColor\n}) => {\n  const dispatch = useDispatch();\n  const pokemons = useSelector(pokemonsSelector);\n  const [chainLinks, setChainLinks] = useState([]);\n  const [selectedPokemonIds, setSelectedPokemonIds] = useState([]);\n  const getPokemonEvolution = useCallback(chain => {\n    if (!chain) {\n      return [];\n    } else {\n      return [chain].concat(getPokemonEvolution(chain.evolvesTo[0]));\n    }\n  }, []);\n  useEffect(() => {\n    if (evolutionChain === null || evolutionChain === void 0 ? void 0 : evolutionChain.chain) {\n      const pokemons = getPokemonEvolution(evolutionChain.chain);\n      const pokemonIds = pokemons.map(({\n        species\n      }) => Number(species.url.split(\"/\").slice(-2)[0]));\n\n      for (const pokemonId of pokemonIds) {\n        dispatch(getPokemonById({\n          pokemonId\n        }));\n      }\n\n      setSelectedPokemonIds(pokemonIds);\n      setChainLinks(pokemons);\n    } //eslint-disable-next-line\n\n  }, []);\n  const pokemonEvolutions = pokemons.data.filter(pokemon => pokemon !== null && selectedPokemonIds.includes(pokemon.id));\n  console.log(pokemonEvolutions);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-12 text-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, evolutionChain === null ? /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, \"No Evolution Chain\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lg:grid lg:grid-cols-2 lg:gap-y-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, pokemonEvolutions.map(pokemon => /*#__PURE__*/React.createElement(React.Fragment, null, pokemon && /*#__PURE__*/React.createElement(PokemonEvolution, {\n    pokemon: pokemon,\n    chain: chainLinks.find(({\n      species\n    }) => Number(species.url.split(\"/\").splice(-2)[0]) === pokemon.id),\n    selectedBackgroundColor: selectedBackgroundColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  })))));\n};\n\nexport default PokemonDetailsEvolutions;","map":{"version":3,"sources":["/home/shinteimai/workspace/personal/react-pokedex/src/components/PokemonDetailsEvolutions.tsx"],"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","getPokemonById","pokemonsSelector","PokemonEvolution","PokemonDetailsEvolutions","pokemon","species","evolutionChain","selectedBackgroundColor","dispatch","pokemons","chainLinks","setChainLinks","selectedPokemonIds","setSelectedPokemonIds","getPokemonEvolution","chain","concat","evolvesTo","pokemonIds","map","Number","url","split","slice","pokemonId","pokemonEvolutions","data","filter","includes","id","console","log","find","splice"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ChainLink, EvolutionChain } from \"../features/evolutionChainSlice\";\nimport {\n  getPokemonById,\n  Pokemon,\n  pokemonsSelector,\n} from \"../features/pokemonSlice\";\nimport { Species } from \"../features/speciesSlice\";\nimport { NamedAPIResource } from \"../features/types\";\n\nimport PokemonEvolution from \"./PokemonEvolution\";\n\ntype Props = {\n  pokemon: Pokemon;\n  species: Species;\n  evolutionChain: EvolutionChain | null;\n  selectedBackgroundColor: { light: string; medium: string };\n};\n\nconst PokemonDetailsEvolutions = ({\n  pokemon,\n  species,\n  evolutionChain,\n  selectedBackgroundColor,\n}: Props) => {\n  const dispatch = useDispatch();\n  const pokemons = useSelector(pokemonsSelector);\n  const [chainLinks, setChainLinks] = useState<ChainLink[]>([]);\n  const [selectedPokemonIds, setSelectedPokemonIds] = useState<number[]>([]);\n\n  const getPokemonEvolution = useCallback(\n    (chain: ChainLink | null): ChainLink[] => {\n      if (!chain) {\n        return [];\n      } else {\n        return [chain].concat(getPokemonEvolution(chain.evolvesTo[0]));\n      }\n    },\n    []\n  );\n\n  useEffect(() => {\n    if (evolutionChain?.chain) {\n      const pokemons: ChainLink[] = getPokemonEvolution(evolutionChain.chain);\n      const pokemonIds = pokemons.map(({ species }) =>\n        Number(species.url.split(\"/\").slice(-2)[0])\n      );\n      for (const pokemonId of pokemonIds) {\n        dispatch(getPokemonById({ pokemonId }));\n      }\n      setSelectedPokemonIds(pokemonIds);\n      setChainLinks(pokemons);\n    }\n    //eslint-disable-next-line\n  }, []);\n\n  const pokemonEvolutions: (Pokemon | null)[] = pokemons.data.filter(\n    (pokemon) => pokemon !== null && selectedPokemonIds.includes(pokemon.id)\n  );\n\n  console.log(pokemonEvolutions);\n\n  return (\n    <div className=\"mt-12 text-center \">\n      {evolutionChain === null ? (\n        <h2>No Evolution Chain</h2>\n      ) : (\n        <div className=\"lg:grid lg:grid-cols-2 lg:gap-y-10\">\n          {pokemonEvolutions.map((pokemon) => (\n            <>\n              {pokemon && (\n                <PokemonEvolution\n                  pokemon={pokemon}\n                  chain={chainLinks.find(\n                    ({ species }) =>\n                      Number(species.url.split(\"/\").splice(-2)[0]) ===\n                      pokemon.id\n                  )}\n                  selectedBackgroundColor={selectedBackgroundColor}\n                />\n              )}\n            </>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PokemonDetailsEvolutions;\n"]},"metadata":{},"sourceType":"module"}